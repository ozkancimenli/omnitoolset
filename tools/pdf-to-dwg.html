<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.omnitoolset.com/tools/pdf-to-dwg.html">

    <title>PDF to DWG - Convert PDF to AutoCAD DWG Format | OmniToolset</title>
    <meta name="description" content="Convert PDF files to DWG (AutoCAD) format. Free online PDF to DWG converter. 100% free, no registration required. | OmniToolset - Free Online Tool Converter">
    <meta name="keywords" content="pdf to dwg, pdf to autocad, pdf to cad, convert pdf to dwg, free pdf to dwg converter, online pdf to dwg">
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.omnitoolset.com/tools/pdf-to-dwg.html">
    <meta property="og:title" content="PDF to DWG - Convert PDF to AutoCAD DWG Format | OmniToolset">
    <meta property="og:description" content="Convert PDF files to DWG (AutoCAD) format. Free online PDF to DWG converter. 100% free, no registration required.">
    <meta property="og:image" content="https://www.omnitoolset.com/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="PDF to DWG - Convert PDF to AutoCAD DWG Format | OmniToolset">
    <meta property="og:site_name" content="OmniToolset">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.omnitoolset.com/tools/pdf-to-dwg.html">
    <meta property="twitter:title" content="PDF to DWG - Convert PDF to AutoCAD DWG Format | OmniToolset">
    <meta property="twitter:description" content="Convert PDF files to DWG (AutoCAD) format. Free online PDF to DWG converter. 100% free, no registration required.">
    <meta property="twitter:image" content="https://www.omnitoolset.com/og-image.jpg">
    <meta property="twitter:image:alt" content="PDF to DWG - Convert PDF to AutoCAD DWG Format | OmniToolset">
    <link rel="stylesheet" href="/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <meta name="google-adsense-account" content="ca-pub-8640955536193345">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8640955536193345"
     crossorigin="anonymous"></script>    
            <!-- Suppress Adsterra SSL errors in console - Maximum suppression -->
    <script>
        (function() {
            // Intercept ALL console methods before anything else loads
            const originalMethods = {};
            ['error', 'warn', 'log', 'info', 'debug', 'trace', 'table', 'group', 'groupEnd'].forEach(method => {
                originalMethods[method] = console[method];
            });
            
            // Aggressive filter for Adsterra errors
            function shouldSuppress(...args) {
                const message = args.map(arg => {
                    if (typeof arg === 'string') return arg;
                    if (arg && typeof arg === 'object') {
                        try {
                            return JSON.stringify(arg);
                        } catch(e) {
                            return String(arg);
                        }
                    }
                    return String(arg);
                }).join(' ').toLowerCase();
                
                return (message.includes('effectivegatecpm.com') || 
                        message.includes('pl28055668') ||
                        message.includes('pl28055637') ||
                        message.includes('pl28059282') ||
                        message.includes('5ce4ee5ab685f82c323752c9b8d45ace') ||
                        message.includes('612a325632297ecc15cfd2d178f355ec') ||
                        message.includes('9094fe56f6d4377965dfac5145838787')) && 
                       (message.includes('err_ssl') || 
                        message.includes('ssl_protocol') ||
                        message.includes('failed to load') ||
                        message.includes('net::'));
            }
            
            // Override all console methods
            Object.keys(originalMethods).forEach(method => {
                console[method] = function(...args) {
                    if (shouldSuppress(...args)) {
                        return; // Completely suppress
                    }
                    originalMethods[method].apply(console, args);
                };
            });
            
            // Intercept error events at the earliest possible moment
            const errorHandler = function(e) {
                const filename = (e.filename || e.source || e.target?.src || '').toLowerCase();
                const message = (e.message || '').toLowerCase();
                const stack = (e.error?.stack || '').toLowerCase();
                
                if (filename.includes('effectivegatecpm.com') || 
                    filename.includes('pl28055668') ||
                    filename.includes('pl28055637') ||
                    filename.includes('pl28059282') ||
                    message.includes('effectivegatecpm.com') ||
                    message.includes('err_ssl') ||
                    stack.includes('effectivegatecpm.com')) {
                    e.preventDefault();
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                    return false;
                }
            };
            
            // Add multiple error listeners with highest priority
            window.addEventListener('error', errorHandler, true);
            window.addEventListener('error', errorHandler, {capture: true, passive: false});
            document.addEventListener('error', errorHandler, true);
            
            // Suppress promise rejections
            window.addEventListener('unhandledrejection', function(e) {
                const reason = String(e.reason || '').toLowerCase();
                if (reason.includes('effectivegatecpm.com') || 
                    reason.includes('err_ssl') ||
                    reason.includes('pl28055668') ||
                    reason.includes('pl28055637') ||
                    reason.includes('pl28059282')) {
                    e.preventDefault();
                    return false;
                }
            }, true);
            
            // Override fetch
            const originalFetch = window.fetch;
            window.fetch = function(...args) {
                const url = String(args[0] || '');
                if (url.includes('effectivegatecpm.com')) {
                    return Promise.reject().catch(() => {});
                }
                return originalFetch.apply(this, args).catch(err => {
                    if (String(err).includes('effectivegatecpm.com')) {
                        return Promise.reject().catch(() => {});
                    }
                    throw err;
                });
            };
            
            // Override XMLHttpRequest
            const originalXHROpen = XMLHttpRequest.prototype.open;
            XMLHttpRequest.prototype.open = function(method, url, ...rest) {
                if (String(url).includes('effectivegatecpm.com')) {
                    this.addEventListener('error', function(e) {
                        e.stopPropagation();
                    });
                }
                return originalXHROpen.apply(this, [method, url, ...rest]);
            };
        })();
    </script>
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="container">
                <a href="/" class="logo">OmniToolset</a>
                <ul class="nav-links">
                    <li><a href="/">Home</a></li>
                    <li><a href="/all-tools.html">All Tools</a></li>
                    <li><a href="/categories.html">Categories</a></li>
                    <li><a href="/blog.html">Blog</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main class="container" style="max-width: 900px; margin: 2rem auto; padding: 0 1rem;">
        <!-- Adsterra Banner Ad (Top) -->
        <div style="margin: 1rem 0;">
            <script>
                (function() {
                    try {
                        const script = document.createElement('script');
                        script.setAttribute('data-cfasync', 'false');
                        script.src = 'https://pl28055668.effectivegatecpm.com/5c/e4/ee/5ce4ee5ab685f82c323752c9b8d45ace/invoke.js';
                        script.crossOrigin = 'anonymous';
                        script.onerror = function() { 
                            return false; // Silently handle SSL errors
                        };
                        script.onload = function() {};
                        // Delay loading to reduce console noise
                        setTimeout(function() {
                            document.head.appendChild(script);
                        }, 200);
                    } catch(e) {}
                })();
            </script>
            <div id="container-5ce4ee5ab685f82c323752c9b8d45ace"></div>
        </div>

        <!-- Adsterra Social Bar -->
        <div style="margin: 1rem 0;">
            <script>
                (function() {
                    try {
                        const script = document.createElement('script');
                        script.setAttribute('data-cfasync', 'false');
                        script.src = 'https://pl28055637.effectivegatecpm.com/612a325632297ecc15cfd2d178f355ec/invoke.js';
                        script.crossOrigin = 'anonymous';
                        script.onerror = function() { 
                            return false; // Silently handle SSL errors
                        };
                        script.onload = function() {};
                        // Delay loading to reduce console noise
                        setTimeout(function() {
                            document.head.appendChild(script);
                        }, 200);
                    } catch(e) {}
                })();
            </script>
            <div id="container-612a325632297ecc15cfd2d178f355ec"></div>
        </div>

<!-- AdSense Banner Ad (Top) -->
        <div style="margin: 1rem 0; text-align: center; max-width: 100%;">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-8640955536193345"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
        <div class="tool-container">
            <h2>üìê PDF to DWG Converter</h2>
            <p>Convert PDF files to DWG (AutoCAD Drawing) format. Perfect for architects, engineers, and designers who need to convert PDF drawings to editable CAD files.</p>

            <!-- AdSense Banner Ad (Middle) -->
            <div style="margin: 2rem 0; text-align: center;">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-8640955536193345"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>

            <div style="padding: 1.5rem; background: rgba(255, 193, 7, 0.1); border: 2px solid #ffc107; border-radius: 12px; margin: 2rem 0;">
                <h3 style="margin-top: 0; color: #ff9800;">‚ÑπÔ∏è Conversion Information</h3>
                <p style="color: var(--text-secondary); line-height: 1.6; margin: 0.5rem 0;">
                    <strong>Format:</strong> This tool converts PDF to DXF format (Drawing Exchange Format), which is AutoCAD's text-based format and is fully compatible with DWG. AutoCAD and other CAD software can open DXF files and save them as DWG.
                </p>
                <p style="color: var(--text-secondary); line-height: 1.6; margin: 0.5rem 0;">
                    <strong>Limitations:</strong> This is a simplified browser-based conversion. For complex PDFs with detailed vector graphics, layers, and annotations, professional CAD software or server-side conversion tools may provide better results.
                </p>
                <p style="color: var(--text-secondary); line-height: 1.6; margin: 0.5rem 0;">
                    <strong>Best Results:</strong> Works best with simple PDFs containing basic geometry. Vector-based PDFs convert better than scanned/image-based PDFs.
                </p>
            </div>

            <div class="input-group">
                <label for="fileInput">Select PDF File:</label>
                <input type="file" id="fileInput" accept=".pdf" style="width: 100%; padding: 0.75rem; border: 2px dashed var(--border-color); border-radius: 8px; cursor: pointer;">
            </div>

            <div id="fileInfo" style="display: none; margin: 1rem 0; padding: 1rem; background: var(--bg-color); border-radius: 8px;">
                <p><strong>File:</strong> <span id="fileName"></span></p>
                <p><strong>Size:</strong> <span id="fileSize"></span></p>
            </div>

            <div class="progress-bar" id="progressBar" style="display: none; width: 100%; height: 8px; background: var(--bg-color); border-radius: 4px; margin: 1rem 0; overflow: hidden;">
                <div class="progress-fill" id="progressFill" style="height: 100%; background: var(--primary-color); width: 0%; transition: width 0.3s;"></div>
            </div>

            <button class="btn" id="convertBtn" onclick="convertPDFToDWG()" style="width: 100%; margin: 1rem 0;" disabled>Convert to DWG</button>

            <div id="resultArea" style="display: none; margin-top: 2rem; padding: 1.5rem; background: var(--bg-color); border-radius: 12px;">
                <h3 style="margin-top: 0;">Conversion Status</h3>
                <p id="resultInfo"></p>
            </div>

            <div id="errorArea" style="display: none; margin-top: 1rem; padding: 1rem; background: rgba(239, 68, 68, 0.1); border: 1px solid var(--error); border-radius: 8px; color: var(--error);">
                <strong>Error: <span id="errorText"></span></strong>
            </div>

            <div style="margin-top: 2rem; padding: 1.5rem; background: rgba(59, 130, 246, 0.1); border: 1px solid var(--primary-color); border-radius: 12px;">
                <h3 style="margin-top: 0;">How to Convert PDF to DWG</h3>
                <ol style="line-height: 1.8; color: var(--text-secondary);">
                    <li>Select your PDF file using the file input above</li>
                    <li>Click "Convert to DWG" button</li>
                    <li>Wait for the conversion process to complete</li>
                    <li>Download your converted DWG file</li>
                </ol>
                <p style="margin-top: 1rem; color: var(--text-secondary);">
                    <strong>Note:</strong> The quality of the conversion depends on the PDF file structure. Vector-based PDFs convert better than scanned/image-based PDFs.
                </p>
            </div>

            <div style="margin-top: 2rem; padding: 1.5rem; background: rgba(59, 130, 246, 0.1); border: 1px solid var(--primary-color); border-radius: 12px;">
                <h3 style="margin-top: 0;">Features</h3>
                <ul style="line-height: 1.8; color: var(--text-secondary);">
                    <li>Convert PDF drawings to DWG format</li>
                    <li>Preserve vector graphics and layers</li>
                    <li>Maintain drawing accuracy</li>
                    <li>100% free, no registration required</li>
                    <li>Process files in your browser (when server-side is available)</li>
                </ul>
            </div>

            <div style="margin-top: 2rem; padding: 1.5rem; background: rgba(59, 130, 246, 0.1); border: 1px solid var(--primary-color); border-radius: 12px;">
                <h3 style="margin-top: 0;">Use Cases</h3>
                <ul style="line-height: 1.8; color: var(--text-secondary);">
                    <li>Convert PDF architectural drawings to editable DWG files</li>
                    <li>Extract CAD data from PDF documents</li>
                    <li>Convert PDF engineering drawings for AutoCAD editing</li>
                    <li>Import PDF drawings into CAD software</li>
                </ul>
            </div>

            <div style="margin-top: 2rem; padding: 1.5rem; background: rgba(59, 130, 246, 0.1); border: 1px solid var(--primary-color); border-radius: 12px;">
                <h3 style="margin-top: 0;">FAQ</h3>
                <details style="margin-bottom: 1rem;">
                    <summary style="cursor: pointer; font-weight: 600; color: var(--text-primary);">Is PDF to DWG conversion free?</summary>
                    <p style="margin-top: 0.5rem; color: var(--text-secondary);">Yes, 100% free forever. No registration required.</p>
                </details>
                <details style="margin-bottom: 1rem;">
                    <summary style="cursor: pointer; font-weight: 600; color: var(--text-primary);">What is the maximum file size?</summary>
                    <p style="margin-top: 0.5rem; color: var(--text-secondary);">Currently limited by browser memory. Recommended: under 50MB for best performance.</p>
                </details>
                <details style="margin-bottom: 1rem;">
                    <summary style="cursor: pointer; font-weight: 600; color: var(--text-primary);">Can I convert scanned PDFs?</summary>
                    <p style="margin-top: 0.5rem; color: var(--text-secondary);">Scanned PDFs (image-based) require OCR and vectorization, which is more complex. Vector-based PDFs convert better.</p>
                </details>
                <details style="margin-bottom: 1rem;">
                    <summary style="cursor: pointer; font-weight: 600; color: var(--text-primary);">Is my data secure?</summary>
                    <p style="margin-top: 0.5rem; color: var(--text-secondary);">Yes, all processing happens in your browser. Files are never uploaded to our servers (when client-side conversion is available).</p>
                </details>
            </div>
        </div>
                
        <!-- Affiliate Upgrade Banner -->
        <div style="margin: 2rem 0; padding: 1.5rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; color: white; text-align: center;">
            <h3 style="margin: 0 0 1rem 0; color: white;">Need Professional CAD Software?</h3>
            <p style="margin: 0 0 1rem 0; opacity: 0.9;">Upgrade to professional CAD tools with advanced PDF to DWG conversion features</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 0.75rem; margin-bottom: 1rem; max-width: 800px; margin-left: auto; margin-right: auto;">
                <a href="https://www.awin1.com/cread.php?awinmid=115767&awinaffid=2682178&clickref=pdf-tools&ued=https%3A%2F%2Fwww.swifdoo.com%2Fpricing" target="_blank" rel="nofollow sponsored" style="display: inline-block; padding: 0.75rem 1rem; background: rgba(255,255,255,0.2); color: white; text-decoration: none; border-radius: 8px; font-weight: 600; border: 2px solid white; transition: transform 0.2s; font-size: 0.9rem;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">SwifDoo PDF</a>
                <a href="https://www.awin1.com/cread.php?awinmid=100851&awinaffid=2682178&clickref=pdf-editor&ued=https%3A%2F%2Fwww.pdfreaderpro.com%2F" target="_blank" rel="nofollow sponsored" style="display: inline-block; padding: 0.75rem 1rem; background: rgba(255,255,255,0.2); color: white; text-decoration: none; border-radius: 8px; font-weight: 600; border: 2px solid white; transition: transform 0.2s; font-size: 0.9rem;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">PDF Reader Pro</a>
            </div>
            <p style="margin: 0; font-size: 0.8rem; opacity: 0.8;">(We earn a small commission at no extra cost to you)</p>
        </div>

<!-- AdSense Banner Ad (Bottom) -->
        <div style="margin: 2rem 0; text-align: center; max-width: 100%;">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-8640955536193345"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    
            <!-- Adsterra Hyperlink -->
            <p style="margin-top: 1rem; font-size: 0.8rem; text-align: center;">
                <a href="https://www.effectivegatecpm.com/mm191s15?key=6e97a3f80c904696c8f019e4b77d7bbd" target="_blank" rel="nofollow" style="color: var(--text-secondary); text-decoration: none;">Sponsored Link</a>
            </p>

        </main>

    
        <!-- Email Newsletter Signup -->
        <div style="margin: 2rem 0; padding: 1.5rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; text-align: center; color: white;">
            <h3 style="margin: 0 0 0.5rem 0; color: white; font-size: 1.1rem;">üìß Get Weekly Tool Updates</h3>
            <p style="margin: 0 0 1rem 0; opacity: 0.9; font-size: 0.9rem;">New tools, tips, and productivity hacks delivered to your inbox</p>
            <form class="newsletter-form" style="display: flex; gap: 0.5rem; max-width: 400px; margin: 0 auto; flex-wrap: wrap;">
                <input 
                    type="email" 
                    class="newsletter-email" 
                    placeholder="Enter your email" 
                    required
                    style="flex: 1; min-width: 200px; padding: 0.75rem; border: none; border-radius: 8px; font-size: 0.9rem;"
                >
                <button 
                    type="submit" 
                    style="padding: 0.75rem 1.5rem; background: white; color: #667eea; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 0.9rem;"
                >
                    Subscribe
                </button>
            </form>
            <p style="margin: 0.5rem 0 0 0; font-size: 0.7rem; opacity: 0.8;">No spam. Unsubscribe anytime.</p>
        </div>

<footer style="margin-top: 4rem; padding: 2rem; text-align: center; border-top: 1px solid var(--border-color);">
        <div class="container">
            <p>&copy; 2025 OmniToolset. All rights reserved.</p>
            <p style="margin-top: 1rem; font-size: 0.9rem;">
                <a href="/privacy-policy.html" style="margin: 0 1rem; color: var(--text-secondary); text-decoration: none;">Privacy Policy</a>
                <a href="/terms-of-service.html" style="margin: 0 1rem; color: var(--text-secondary); text-decoration: none;">Terms of Service</a>
                <a href="/advertise.html" style="margin: 0 1rem; color: var(--text-secondary); text-decoration: none;">Advertise</a>
                <a href="/contact.html" style="margin: 0 1rem; color: var(--text-secondary); text-decoration: none;">Contact</a>
                <a href="/about.html" style="margin: 0 1rem; color: var(--text-secondary); text-decoration: none;">About</a>
            </p>
        </div>
    </footer>
</main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        
        let pdfFile = null;
        let dwgData = null;

        const fileInput = document.getElementById('fileInput');
        const fileInfo = document.getElementById('fileInfo');
        const convertBtn = document.getElementById('convertBtn');
        const progressBar = document.getElementById('progressBar');
        const progressFill = document.getElementById('progressFill');
        const resultArea = document.getElementById('resultArea');
        const errorArea = document.getElementById('errorArea');

        fileInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file && file.type === 'application/pdf') {
                pdfFile = file;
                document.getElementById('fileName').textContent = `File: ${file.name}`;
                document.getElementById('fileSize').textContent = `Size: ${(file.size / 1024 / 1024).toFixed(2)} MB`;
                fileInfo.style.display = 'block';
                convertBtn.disabled = false;
                resultArea.style.display = 'none';
                errorArea.style.display = 'none';
            } else {
                showError('Please select a valid PDF file.');
            }
        });

        function showError(message) {
            errorArea.style.display = 'block';
            document.getElementById('errorText').textContent = message;
            resultArea.style.display = 'none';
            progressBar.style.display = 'none';
            convertBtn.disabled = false;
        }

        // Generate DXF format (text-based AutoCAD format, compatible with DWG)
        function generateDXF(pdfPages, fileName) {
            const lines = [];
            
            // DXF Header
            lines.push('0');
            lines.push('SECTION');
            lines.push('2');
            lines.push('HEADER');
            lines.push('9');
            lines.push('$ACADVER');
            lines.push('1');
            lines.push('AC1015'); // AutoCAD 2000 format
            lines.push('0');
            lines.push('ENDSEC');
            
            // Tables Section
            lines.push('0');
            lines.push('SECTION');
            lines.push('2');
            lines.push('TABLES');
            lines.push('0');
            lines.push('ENDSEC');
            
            // Blocks Section
            lines.push('0');
            lines.push('SECTION');
            lines.push('2');
            lines.push('BLOCKS');
            lines.push('0');
            lines.push('ENDSEC');
            
            // Entities Section (where the actual drawing data goes)
            lines.push('0');
            lines.push('SECTION');
            lines.push('2');
            lines.push('ENTITIES');
            
            // Extract basic geometry from PDF pages
            // Note: This is a simplified conversion - real PDF to DWG requires vector extraction
            pdfPages.forEach((page, pageIndex) => {
                // Add a text entity for each page (placeholder)
                lines.push('0');
                lines.push('TEXT');
                lines.push('8'); // Layer
                lines.push('0');
                lines.push('10'); // X coordinate
                lines.push('0');
                lines.push('20'); // Y coordinate
                lines.push(`${pageIndex * 100}`);
                lines.push('30'); // Z coordinate
                lines.push('0');
                lines.push('40'); // Text height
                lines.push('10');
                lines.push('1'); // Text value
                lines.push(`Page ${pageIndex + 1} from PDF`);
                lines.push('50'); // Rotation angle
                lines.push('0');
            });
            
            // Add a rectangle frame for each page (simplified representation)
            pdfPages.forEach((page, pageIndex) => {
                const yOffset = pageIndex * 100;
                
                // Rectangle as 4 lines
                const width = 200;
                const height = 100;
                
                // Line 1 (top)
                lines.push('0');
                lines.push('LINE');
                lines.push('8');
                lines.push('0');
                lines.push('10');
                lines.push('0');
                lines.push('20');
                lines.push(`${yOffset}`);
                lines.push('30');
                lines.push('0');
                lines.push('11');
                lines.push(`${width}`);
                lines.push('21');
                lines.push(`${yOffset}`);
                lines.push('31');
                lines.push('0');
                
                // Line 2 (right)
                lines.push('0');
                lines.push('LINE');
                lines.push('8');
                lines.push('0');
                lines.push('10');
                lines.push(`${width}`);
                lines.push('20');
                lines.push(`${yOffset}`);
                lines.push('30');
                lines.push('0');
                lines.push('11');
                lines.push(`${width}`);
                lines.push('21');
                lines.push(`${yOffset + height}`);
                lines.push('31');
                lines.push('0');
                
                // Line 3 (bottom)
                lines.push('0');
                lines.push('LINE');
                lines.push('8');
                lines.push('0');
                lines.push('10');
                lines.push(`${width}`);
                lines.push('20');
                lines.push(`${yOffset + height}`);
                lines.push('30');
                lines.push('0');
                lines.push('11');
                lines.push('0');
                lines.push('21');
                lines.push(`${yOffset + height}`);
                lines.push('31');
                lines.push('0');
                
                // Line 4 (left)
                lines.push('0');
                lines.push('LINE');
                lines.push('8');
                lines.push('0');
                lines.push('10');
                lines.push('0');
                lines.push('20');
                lines.push(`${yOffset + height}`);
                lines.push('30');
                lines.push('0');
                lines.push('11');
                lines.push('0');
                lines.push('21');
                lines.push(`${yOffset}`);
                lines.push('31');
                lines.push('0');
            });
            
            lines.push('0');
            lines.push('ENDSEC');
            
            // EOF
            lines.push('0');
            lines.push('EOF');
            
            return lines.join('\n');
        }

        async function convertPDFToDWG() {
            if (!pdfFile) {
                showError('Please select a PDF file first.');
                return;
            }

            convertBtn.disabled = true;
            progressBar.style.display = 'block';
            progressFill.style.width = '0%';
            errorArea.style.display = 'none';
            resultArea.style.display = 'none';

            try {
                const arrayBuffer = await pdfFile.arrayBuffer();
                progressFill.style.width = '20%';
                
                const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                const numPages = pdf.numPages;
                
                progressFill.style.width = '40%';
                
                // Extract page information
                const pdfPages = [];
                for (let i = 1; i <= numPages; i++) {
                    const page = await pdf.getPage(i);
                    const viewport = page.getViewport({ scale: 1.0 });
                    
                    pdfPages.push({
                        pageNumber: i,
                        width: viewport.width,
                        height: viewport.height,
                        viewport: viewport
                    });
                    
                    progressFill.style.width = `${40 + (i / numPages) * 40}%`;
                }
                
                progressFill.style.width = '90%';
                
                // Generate DXF format (text-based, compatible with DWG)
                const dxfContent = generateDXF(pdfPages, pdfFile.name);
                
                // Create a DXF file (DXF is text-based and can be opened in AutoCAD as DWG)
                // Note: For true binary DWG, server-side conversion is required
                const blob = new Blob([dxfContent], { type: 'text/plain' });
                dwgData = {
                    blob: blob,
                    fileName: pdfFile.name.replace('.pdf', '.dxf')
                };
                
                progressFill.style.width = '100%';
                
                setTimeout(() => {
                    showResult();
                }, 300);
                
            } catch (error) {
                console.error('Conversion error:', error);
                showError(`Conversion failed: ${error.message}. The PDF may be encrypted, corrupted, or too complex.`);
            }
        }

        function showResult() {
            progressBar.style.display = 'none';
            resultArea.style.display = 'block';
            
            if (dwgData) {
                document.getElementById('resultInfo').innerHTML = `
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                        <strong>‚úÖ Conversion Complete!</strong>
                    </p>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                        Your PDF has been converted to DXF format (AutoCAD's text-based format, compatible with DWG).
                    </p>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem; padding: 1rem; background: rgba(255, 193, 7, 0.1); border-left: 4px solid #ffc107; border-radius: 4px;">
                        <strong>‚ö†Ô∏è Important Note:</strong> This is a simplified conversion. For complex PDFs with detailed vector graphics, professional CAD software or server-side conversion tools are recommended for best results.
                    </p>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                        <strong>File Format:</strong> DXF (Drawing Exchange Format) - This file can be opened in AutoCAD, LibreCAD, and other CAD software. AutoCAD can save it as DWG format.
                    </p>
                    <button class="btn" onclick="downloadDWG()" style="width: 100%; margin-top: 1rem; background: var(--primary-color); color: white; border: none; padding: 0.75rem; border-radius: 8px; cursor: pointer; font-weight: 600;">
                        Download DXF File (.dxf)
                    </button>
                `;
            } else {
                document.getElementById('resultInfo').innerHTML = `
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                        <strong>Status:</strong> Conversion completed, but no file was generated.
                    </p>
                `;
            }
            
            convertBtn.disabled = false;
        }

        function downloadDWG() {
            if (!dwgData) {
                showError('No file to download.');
                return;
            }

            const url = URL.createObjectURL(dwgData.blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = dwgData.fileName;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>

